# Thicken（ティキン）

**Thicken** は、WordPress の過去記事をランダムに 1 件ずつ選び、  
一定間隔で切り替わる **専用RSSフィード** として配信するプラグインです。

「昔の記事をもう一度読ませたい」
「RSSや外部サービスに定期的に1記事だけ流したい」

そんな用途に特化した、シンプルなランダムRSSプラグインです。

---

## 主な機能

- 専用のランダムRSSフィードを追加
- フィードには **常に1記事のみ** 出力
- 設定した時間間隔ごとに、別の記事へ自動ローテーション
- 対象投稿タイプを **チェックボックスで選択可能**
- 管理画面からすべて設定可能

---

## RSSフィードURL

デフォルトのフィードURL：

https://example.com/feed/random-post

※ フィードスラッグは管理画面から変更可能です。

---

## 動作の仕組み

1. `/feed/random-post` にアクセスされる
2. まだキャッシュが無い、または期限切れの場合：
   - 選択された投稿タイプの中からランダムに **1記事** 抽選
   - 抽選結果をキャッシュに保存
3. キャッシュ有効期間中は、同じ記事を返す
4. 期限切れ後、次のアクセスで再度ランダム抽選

これにより、

- 同じ日でも「1日に何回か」配信が可能
- RSSリーダーや外部サービスからのアクセスが安定

という挙動になります。

---

## 管理画面の設定項目

**管理画面 → 設定 → Thicken**

### 1. 対象投稿タイプ
- 公開されている投稿タイプをチェックボックスで選択
- 複数選択可
- 例：
  - post（投稿）
  - page（固定ページ）
  - カスタム投稿タイプ

---

### 2. ローテーション間隔
以下から1つ選択できます：

- 10分
- 20分
- 30分
- 60分（1時間）
- 3時間
- 6時間
- 12時間
- 24時間

選択した時間ごとに、RSSの内容が切り替わります。

---

### 3. フィードスラッグ
- デフォルト：`random-post`
- 任意のスラッグに変更可能  
  例：
  - `past-post`
  - `archive`
  - `daily-pick`

変更後のURL：

/feed/{設定したスラッグ}

---

## 出力されるRSS内容

- RSS形式：RSS2
- `<item>`：常に1件
- 出力項目：
  - title
  - link
  - pubDate
  - guid（投稿のパーマリンク）
  - description（抜粋 or 本文から生成）

※ `guid` は固定のため、RSSリーダーによっては  
「既読扱い」される場合があります（仕様どおり）。

---

## 想定ユースケース

- メールマガジンで「過去記事紹介」を自動化
- SNS / Bot / 外部ツールへの定期投稿元RSS
- アフィリエイト記事・ストック記事の再露出
- 更新が少ないサイトのRSS活性化

---

## インストール方法

1. このリポジトリをダウンロード、またはクローン
2. フォルダ名を `thicken` にする
3. `wp-content/plugins/thicken/` にアップロード
4. WordPress管理画面 → プラグイン → **Thicken** を有効化
5. 管理画面 → 設定 → Thicken で各種設定

---

## 技術メモ

- ランダム抽選とローテーション管理は  
  WordPress の **Transients API** を使用
- パフォーマンスを考慮し、  
  毎回ランダムクエリは実行しません
- 投稿が存在しない場合は、空のRSSを返します

---

## 動作要件

- WordPress 5.0 以上（推奨）
- PHP 7.4 以上（推奨）

---

## ライセンス

GPL v2 or later

---

## 作者

Thicken Plugin  
